# AI 알림봇 마이그레이션 개발 계획서

**작성일**: 2025-01-XX  
**프로젝트**: cursorAI  
**목표**: 원본 React 서비스를 Vue.js 3 + Node.js/Express로 동일하게 마이그레이션  
**원본 배포 URL**: https://workflow.changups.kr  
**원본 소스**: `C:\Users\hckim\frients\grouptest\workflow-automation`

---

## 1. 원본 소스 분석 결과

### 1.1 원본 기술 스택
- **Frontend**: React.js
- **Backend**: Node.js + Express
- **Database**: SQLite
- **배포**: Vercel (Frontend) + Railway (Backend)

### 1.2 원본 AI 알림봇 기능 구조

#### Frontend 컴포넌트
- `AIBot.js` (346줄) - 메인 컴포넌트
- `PaymentSettings.js` - 결제 설정
- `DebugLogViewer.js` - 디버그 로그 뷰어
- `AIBot.css` - 스타일

#### Backend API
- `GET /api/ai-bot/settings` - 설정 조회
- `POST /api/ai-bot/settings` - 설정 저장
- `POST /api/ai-bot/integration` - 연동 설정 저장
- `GET /api/ai-bot/templates` - 템플릿 조회
- `POST /api/ai-bot/templates` - 템플릿 저장
- `POST /api/ai-bot/sync-workflows` - 워크플로우 동기화

#### 데이터베이스 테이블
- `ai_bot_settings` - 설정 저장
- `ai_bot_templates` - 템플릿 선택 저장

### 1.3 원본 기능 상세

**템플릿 관리**:
- 10개 템플릿 (주문접수, 결제완료, 상품준비중, 배송시작, 배송완료, 구매확정, 리뷰요청, 재고부족, 주문취소, 환불완료)
- 기본 템플릿 5개 자동 선택 (ID: 1,2,3,4,5)
- 템플릿 선택/해제 기능
- 템플릿 저장 시 워크플로우 자동 동기화

**설정 관리**:
- 결제 설정 (포트원 연동)
- 스마트스토어 연동 설정 (API Key, Secret, Store ID)
- 템플릿 선택 설정

**워크플로우 동기화**:
- 선택된 템플릿에 맞는 워크플로우 자동 생성/업데이트
- 워크플로우 이름: `[AI알림봇] {템플릿명}`
- 웹훅 URL: `https://tools.alimbot.com/api/v1/msg/process`

---

## 2. cursorAI 프로젝트 현재 상태

### 2.1 기술 스택
- **Frontend**: Vue.js 3 (Composition API) + Vite + Tailwind CSS ✅
- **Backend**: Node.js + Express ✅
- **Database**: SQLite ✅

### 2.2 현재 구현 상태

#### ✅ 완료된 작업

**백엔드**:
- [x] `backend/routes/ai-alimbot/index.js` - 6개 API 엔드포인트 구현
- [x] `backend/database.js` - `ai_alimbot_settings`, `ai_alimbot_templates` 테이블 스키마 추가
- [x] `backend/server.js` - 라우터 등록 (`/api/ai-alimbot`)

**프론트엔드**:
- [x] `frontend/src/views/AIAlimbotView.vue` - 메인 뷰 (탭 관리)
- [x] `frontend/src/components/ai-alimbot/AIAlimbotDashboard.vue` - 대시보드
- [x] `frontend/src/components/ai-alimbot/AIAlimbotSettings.vue` - 설정
- [x] `frontend/src/components/PaymentSettings.vue` - 결제 설정 (Vue 버전)
- [x] `frontend/src/components/DebugLogViewer.vue` - 디버그 로그 (Vue 버전)
- [x] `frontend/src/stores/aiAlimbot.js` - Pinia Store
- [x] `frontend/src/router/index.js` - 라우터 설정 (`/ai-bot` → `AIAlimbotView`)

#### ❌ 미완성/테스트 필요 항목

**기능 테스트**:
- [ ] 백엔드 서버 실행 및 API 테스트
- [ ] 프론트엔드 서버 실행 및 UI 테스트
- [ ] 템플릿 선택 및 저장 기능 테스트
- [ ] 설정 저장 기능 테스트
- [ ] 워크플로우 동기화 기능 테스트
- [ ] 결제 설정 (포트원 연동) 테스트
- [ ] 디버그 로그 뷰어 테스트

**원본과 비교 검증**:
- [ ] UI/UX 동일성 확인
- [ ] 기능 동작 동일성 확인
- [ ] API 응답 형식 확인
- [ ] 에러 처리 확인

---

## 3. 시험절차서 기반 테스트 계획

### 3.1 AI 알림봇 기능 테스트 항목

#### 대시보드 탭 테스트

| 번호 | 시험항목 | 시험절차 | 예상결과 | 현재 상태 |
|------|----------|----------|----------|----------|
| A.1.1 | 페이지 접속 | `/ai-bot` 경로 접속 | AI 알림봇 페이지 표시 | ❌ 미테스트 |
| A.1.2 | 대시보드 탭 기본 표시 | 페이지 로드 | 대시보드 탭 활성화 | ❌ 미테스트 |
| A.1.3 | 업종 선택 카드 표시 | 대시보드 확인 | 쇼핑몰/예약/프랜차이즈/매장 카드 표시 | ❌ 미테스트 |
| A.1.4 | 템플릿 그리드 표시 | 대시보드 확인 | 10개 템플릿 카드 그리드 표시 | ❌ 미테스트 |
| A.1.5 | 기본 템플릿 자동 선택 | 페이지 로드 | ID 1,2,3,4,5 템플릿 자동 선택 | ❌ 미테스트 |
| A.1.6 | 템플릿 선택/해제 | 템플릿 카드 클릭 | 체크 표시 + 배경색 변경 | ❌ 미테스트 |
| A.1.7 | 템플릿 저장 | "선택한 템플릿 저장" 클릭 | 저장 성공 + 워크플로우 동기화 | ❌ 미테스트 |
| A.1.8 | 디버그 로그 표시 | 대시보드 하단 확인 | GW/WF 디버그 로그 섹션 표시 | ❌ 미테스트 |

#### 설정 탭 테스트

| 번호 | 시험항목 | 시험절차 | 예상결과 | 현재 상태 |
|------|----------|----------|----------|----------|
| A.2.1 | 설정 탭 접속 | "설정" 탭 클릭 | 설정 화면 표시 | ❌ 미테스트 |
| A.2.2 | 결제 설정 표시 | 설정 탭 확인 | 결제 섹션 표시 | ❌ 미테스트 |
| A.2.3 | 잔액 조회 | 페이지 로드 | 현재 잔액 표시 | ❌ 미테스트 |
| A.2.4 | 충전 기능 | 충전하기 클릭 | 포트원 결제 모듈 팝업 | ❌ 미테스트 |
| A.2.5 | 연동 설정 표시 | 설정 탭 확인 | 연동 섹션 표시 | ❌ 미테스트 |
| A.2.6 | 스마트스토어 연동 활성화 | 체크박스 클릭 | API Key/Secret/Store ID 입력 필드 표시 | ❌ 미테스트 |
| A.2.7 | 연동 설정 저장 | "연동 설정 저장" 클릭 | 저장 성공 알림 | ❌ 미테스트 |
| A.2.8 | 템플릿 선택 (설정) | 체크박스 클릭 | 템플릿 선택/해제 | ❌ 미테스트 |
| A.2.9 | 템플릿 저장 (설정) | "템플릿 선택 저장" 클릭 | 저장 성공 알림 | ❌ 미테스트 |

#### 워크플로우 동기화 테스트

| 번호 | 시험항목 | 시험절차 | 예상결과 | 현재 상태 |
|------|----------|----------|----------|----------|
| A.3.1 | 워크플로우 생성 확인 | 템플릿 저장 후 마케팅자동화 이동 | `[AI알림봇] 주문접수` 등 생성 확인 | ❌ 미테스트 |
| A.3.2 | 워크플로우 이름 형식 | 생성된 워크플로우 확인 | `[AI알림봇] {템플릿명}` 형식 | ❌ 미테스트 |
| A.3.3 | 워크플로우 이벤트 | 워크플로우 편집 | 이벤트명이 템플릿에 매핑된 이벤트 | ❌ 미테스트 |
| A.3.4 | 워크플로우 웹훅 URL | 워크플로우 편집 | `https://tools.alimbot.com/api/v1/msg/process` | ❌ 미테스트 |

---

## 4. 개발 계획

### Phase 1: 환경 설정 및 기본 구조 확인 (1일차)

**목표**: 개발 환경 구축 및 현재 구현 상태 확인

**작업 내용**:
1. [ ] 백엔드 서버 실행 확인
   ```bash
   cd backend
   npm install
   npm run dev
   ```
2. [ ] 프론트엔드 서버 실행 확인
   ```bash
   cd frontend
   npm install
   npm run dev
   ```
3. [ ] 데이터베이스 테이블 생성 확인
   - `ai_alimbot_settings` 테이블 존재 확인
   - `ai_alimbot_templates` 테이블 존재 확인
4. [ ] API 엔드포인트 기본 동작 확인
   - `GET /api/ai-alimbot/settings` 테스트
   - `GET /api/ai-alimbot/templates` 테스트

**완료 기준**: 서버 정상 실행 및 기본 API 응답 확인

---

### Phase 2: 백엔드 API 완성 및 테스트 (2일차)

**목표**: 모든 백엔드 API가 원본과 동일하게 동작하도록 구현

**작업 내용**:
1. [ ] API 엔드포인트 동작 테스트
   - [ ] `GET /api/ai-alimbot/settings` - 설정 조회
   - [ ] `POST /api/ai-alimbot/settings` - 설정 저장
   - [ ] `POST /api/ai-alimbot/integration` - 연동 설정 저장
   - [ ] `GET /api/ai-alimbot/templates` - 템플릿 조회
   - [ ] `POST /api/ai-alimbot/templates` - 템플릿 저장
   - [ ] `POST /api/ai-alimbot/sync-workflows` - 워크플로우 동기화

2. [ ] 원본 API와 응답 형식 비교
   - 요청/응답 형식 동일성 확인
   - 에러 처리 동일성 확인

3. [ ] 버그 수정
   - 발견된 버그 수정
   - 원본과 다른 동작 수정

**완료 기준**: 모든 API가 원본과 동일하게 동작

---

### Phase 3: 프론트엔드 UI/UX 완성 (3일차)

**목표**: 프론트엔드 UI가 원본과 동일하게 표시되고 동작하도록 구현

**작업 내용**:
1. [ ] 대시보드 탭 구현 확인
   - [ ] 업종 선택 카드 표시
   - [ ] 템플릿 그리드 표시
   - [ ] 템플릿 선택/해제 동작
   - [ ] 템플릿 저장 동작
   - [ ] 디버그 로그 뷰어 표시

2. [ ] 설정 탭 구현 확인
   - [ ] 결제 설정 UI 표시
   - [ ] 연동 설정 UI 표시
   - [ ] 템플릿 선택 UI 표시
   - [ ] 설정 저장 동작

3. [ ] 원본과 UI 비교
   - 스타일 동일성 확인
   - 레이아웃 동일성 확인
   - 인터랙션 동일성 확인

4. [ ] 버그 수정
   - UI 버그 수정
   - 동작 버그 수정

**완료 기준**: UI가 원본과 동일하게 표시되고 동작

---

### Phase 4: 통합 테스트 및 검증 (4일차)

**목표**: 전체 기능이 원본과 동일하게 동작하는지 검증

**작업 내용**:
1. [ ] 시험절차서 기반 테스트 실행
   - 대시보드 탭 테스트 (A.1.1 ~ A.1.8)
   - 설정 탭 테스트 (A.2.1 ~ A.2.9)
   - 워크플로우 동기화 테스트 (A.3.1 ~ A.3.4)

2. [ ] 원본 배포 서비스와 비교 테스트
   - 동일한 시나리오로 테스트
   - 결과 비교

3. [ ] 버그 수정 및 개선
   - 발견된 버그 수정
   - 성능 개선 (필요 시)

**완료 기준**: 시험절차서 항목 100% 통과

---

### Phase 5: 문서화 및 마무리 (5일차)

**목표**: 개발 완료 및 문서화

**작업 내용**:
1. [ ] 개발 완료 보고서 작성
2. [ ] 테스트 결과 문서화
3. [ ] 코드 리뷰 및 정리
4. [ ] Git 커밋 및 Push

**완료 기준**: 모든 문서 작성 완료

---

## 5. 우선순위별 작업 목록

### P0 (최우선 - 필수)
1. 백엔드 서버 실행 및 기본 API 테스트
2. 프론트엔드 서버 실행 및 기본 UI 표시 확인
3. 템플릿 선택 및 저장 기능 동작 확인
4. 워크플로우 동기화 기능 동작 확인

### P1 (높음)
1. 설정 저장 기능 동작 확인
2. 연동 설정 저장 기능 동작 확인
3. 결제 설정 UI 표시 확인
4. 디버그 로그 뷰어 동작 확인

### P2 (중간)
1. UI/UX 원본과 비교 및 수정
2. 에러 처리 개선
3. 성능 최적화

### P3 (낮음)
1. 코드 리팩토링
2. 문서화 개선

---

## 6. 예상 일정

| Phase | 작업 내용 | 예상 소요 시간 | 상태 |
|-------|----------|--------------|------|
| Phase 1 | 환경 설정 및 기본 구조 확인 | 2시간 | ⏳ 진행 예정 |
| Phase 2 | 백엔드 API 완성 및 테스트 | 4시간 | ⏳ 진행 예정 |
| Phase 3 | 프론트엔드 UI/UX 완성 | 4시간 | ⏳ 진행 예정 |
| Phase 4 | 통합 테스트 및 검증 | 3시간 | ⏳ 진행 예정 |
| Phase 5 | 문서화 및 마무리 | 1시간 | ⏳ 진행 예정 |
| **합계** | | **14시간** | |

---

## 7. 리스크 및 대응 방안

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|----------|
| 백엔드 서버 실행 실패 | 높음 | 의존성 재설치, 포트 충돌 확인 |
| 프론트엔드 빌드 오류 | 높음 | Vue.js 버전 확인, 의존성 재설치 |
| API 응답 형식 불일치 | 중간 | 원본 API 응답 형식 재확인 및 수정 |
| UI 스타일 불일치 | 낮음 | CSS 재확인 및 수정 |
| 워크플로우 동기화 실패 | 높음 | 원본 로직 재확인 및 수정 |

---

## 8. 다음 단계

**즉시 실행**:
1. 백엔드 서버 실행 및 테스트
2. 프론트엔드 서버 실행 및 테스트
3. 기본 기능 동작 확인
4. 버그 수정

**개발 계획서 작성 완료**

